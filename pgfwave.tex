%&pdflatex
\documentclass{article}

\usepackage{tikz}

\def\path{path@}

\def\textwave#1{%
  \begingroup
    \def\lastchar{}%
    \let\currentchar\empty
    \let\str\empty
    \textwaveX#1\relax
    \message{^^J\meaning\str}%
    \begin{tikzpicture}[x=.0175ex,y=.0175ex,line width=0.5pt]
      \draw[step=50,very thin,color=gray] (0,0) grid (200,100);
      \draw (0,0) \str;
    \end{tikzpicture}
  \endgroup
}


\def\textwaveX#1{%
  \ifx\relax#1\empty
  \else
    \def\currentchar{#1}%
    \edef\str{\str\csname \path\lastchar\currentchar\endcsname}%
    \let\lastchar\currentchar
    \expandafter
    \textwaveX
  \fi
}

\def\sigH{H}
\def\sigL{L}

\def\slope{\csname waveslope\endcsname}%
\def\zslope{\csname wavezslope\endcsname}%

\makeatletter

\def\pgfwave@iflower#1{%
  \begingroup
  \message{^^Jlower? '\noexpand#1'}%
  \edef\@tempa{`#1}%
  \ifnum\@tempa=\lccode\@tempa
    \endgroup
    \expandafter
    \@firstoftwo
  \else
    \endgroup
    \expandafter
    \@secondoftwo
  \fi
}


\def\pgfwavesetslope#1{%
  \@tempcnta=#1\relax
  \edef\waveslope{\the\@tempcnta}%
  \divide\@tempcnta by 2\relax
  \edef\wavezslope{\the\@tempcnta}%
}
\AtBeginDocument{%
  \pgfwavesetslope{10}%
}

\providecommand*\@nameedef[1]{%
  \expandafter\edef
  \csname #1\endcsname
}

\def\pgfwavedef#1{%
  \pgfwavedef@#1\relax%
}

\def\pgfwavedef@#1#2\relax#3{%
  \pgfwave@iflower{#2}%
    {\def\width{\csname wavewidth\endcsname/2.}}%
    {\def\width{\csname wavewidth\endcsname}}%
  \expandafter\edef\csname \path#1#2\endcsname{#3}%
  \pgfwave@iflower{#1}{}%
    {\pgfwave@iflower{#2}{}%
      {%
        \uppercase{\lowercase{\pgfwavedef@{#1}}{#2}}\relax{#3}%
        \lowercase{\uppercase{\pgfwavedef@{#1}}{#2}}\relax{#3}%
        \lowercase{\pgfwavedef@{#1}{#2}}\relax{#3}%
      }%
    }%
}

\def\pgfwavelet#1#2{%
  \pgfwavelet@#1\relax#2\relax
}

\def\pgfwavelet@#1#2\relax#3#4\relax{%
  \expandafter
  \let\csname \path#1#2\expandafter\endcsname\csname \path#3#4\endcsname
  \pgfwave@iflower{#1}{}%
    {\pgfwave@iflower{#2}{}%
      {%
        \uppercase{\lowercase{%
        \uppercase{\lowercase{\pgfwavelet@{#1}}{#2}}\relax{#3}}{#4}}\relax%
        \lowercase{\uppercase{%
        \lowercase{\uppercase{\pgfwavelet@{#1}}{#2}}\relax{#3}}{#4}}\relax%
        \lowercase{\pgfwavelet@{#1}{#2}\relax{#3}{#4}}\relax%
      }%
    }%
}
\AtBeginDocument{%
  \def\wavewidth{100}%
  \def\waveheight{100}%
}
\def\width{\csname wavewidth\endcsname}
\def\height{\csname waveheight\endcsname}

\def\pgfwave@chars#1{}
\def\pgfwave@char@nums#1{}

\def\pgfwavechar#1{%
  \uppercase{%
  \edef\pgfwave@chars{\pgfwave@chars,#1}%
  \pgfwavechar@{#1}}%
}

\def\pgfwavechar@#1#2#3{%
  \def\width{\csname wavewidth\endcsname}%
  \@nameedef{\path#1}{#2#3}%
  \def\width{\csname wavewidth\endcsname/2.}%
  \lowercase{\@nameedef{\path#1}}{#2#3}%
  \pgfwavedef{#1#1}{#3}%
}

\def\pgfwavealias#1#2{%
  \uppercase{\pgfwavealias@{#1}{#2}}%
}

\def\pgfwavealias@#1#2{%
  \expandafter
  \let\csname \path#1\expandafter\endcsname
  \csname \path#2\endcsname
  \lowercase{%
  \expandafter
  \let\csname \path#1\expandafter\endcsname
  \csname \path#2\endcsname
  }%
  \uppercase{\pgfwavelet{#1#1}{#2#2}}%
    \message{^^JDEBUG0: \pgfwave@chars^^J}%
  \uppercase{%
    \@for\@tempa:=\pgfwave@chars\do{%
      \expandafter\pgfwavelet@@
      \expandafter{\@tempa}{#1}{#2}%
    }%
  }%
}

\def\pgfwavelet@@#1#2#3{%
  \pgfwavelet{#1#2}{#1#3}%
  \pgfwavelet{#2#1}{#3#1}%
}

\pgfwavechar{H}{(0,\height)}{-- ++(\width,0) }
\pgfwavechar{L}{(0,0)}{-- ++(\width,0) }
\pgfwavechar{Z}{(0,\height/2.)}{-- ++(\width,0) }
\pgfwavechar{D}{(0,0)}{-- ++(+\width,0) ++(-\width*1.1,+\height)
                -- ++(+\width*1.1,0) ++(0,-\height) }

\pgfwavedef{HH}{-- ++(\width,0) }
\pgfwavedef{LL}{-- ++(\width,0) }
\pgfwavedef{HL}{-- ++(\slope,-\height) -- ++(\width-\slope,0) }
\pgfwavedef{LH}{-- ++(\slope, \height) -- ++(\width-\slope,0) }

\pgfwavedef{ZZ}{-- ++(\width,0) }
\pgfwavedef{LZ}{-- ++(\zslope,+\height/2.) -- ++(\width-\zslope,0) }
\pgfwavedef{HZ}{-- ++(\zslope,-\height/2.) -- ++(\width-\zslope,0) }
\pgfwavedef{ZH}{-- ++(\zslope,+\height/2.) -- ++(\width-\zslope,0) }
\pgfwavedef{ZL}{-- ++(\zslope,-\height/2.) -- ++(\width-\zslope,0) }

\pgfwavedef{DZ}{}
\pgfwavedef{ZD}{
            -- ++(\zslope,\height/2.)   -- ++(\width-\zslope,0)
               ++(-\width,-\height/2.)
            -- ++(\zslope,-\height/2.)  -- ++(\width-\zslope,0) }
\pgfwavedef{DZ}{
               ++(-\width/10.,0)        -- ++(+\width/10.,0)
            -- ++( \zslope,+\height/2.)
               ++(-\zslope,+\height/2.)
               ++(-\width/10.,0)        -- ++(+\width/10.,0)
            -- ++( \zslope,-\height/2.) -- ++(\width-\zslope,0) }

\pgfwavedef{LD}{
            -- ++(\slope,\height)       -- ++(\width-\slope,0)
               ++(-\width,-\height)        ++(\zslope,+\height/2.)
            -- ++(\zslope,-\height/2.)  -- ++(\width-\slope,0) }
\pgfwavedef{DL}{
               ++(-\width/10.,0)        -- ++(+\width/10.,0)
            -- ++( \zslope,+\height/2.)
               ++(-\zslope,+\height/2.)
               ++(-\width/10.,0)        -- ++(+\width/10.,0)
            -- ++(\slope,-\height)      -- ++(\width-\slope,0) }
\pgfwavedef{HD}{-- ++(\slope,-\height)
            -- ++(\width-\slope,0)
               ++(-\width,+\height) ++(\zslope,-\height/2.)
            -- ++(\zslope,+\height/2.) -- ++(\width-\slope,0)
               ++(0,-\height) }
\pgfwavedef{DH}{   ++(0,+\height)
               ++(-\width/10.,0) -- ++(+\width/10.,0)
            -- ++(\zslope,-\height/2.)
               ++(-\zslope,-\height/2.)
               ++(-\width/10.,0) -- ++(+\width/10.,0)
            -- ++(\slope,+\height) -- ++(\width-\slope,0) }
\pgfwavedef{DD}{-- ++(+\width,0) ++(-\width*1.1,+\height) 
%++(-\width/2.,+\height/2.) node [scale=0.75] {A} ++(-\width/2.+1,+\height/2.)
            -- ++(+\width*1.1,0) ++(0,-\height) }

\pgfwavealias{X}{D}
\pgfwavedef{XX}{
               ++(-\width/10.,0) -- ++(+\width/10.,0)
            -- ++(\slope,+\height) -- ++(\width-\slope,0)
               ++(-\width,0)
               ++(-\width/10.,0) -- ++(+\width/10.,0)
            -- ++(\slope,-\height) -- ++(\width-\slope,0) }
\pgfwavelet{DX}{XX}
\begin{document}


\noindent
\sffamily
\begin{tabular}{ll}
 Test A & \textwave{hlhlhlhlhlhlhlhlhlhlhlhl} \\
 Test A & \textwave{HLHLHLHLHLHLHLHLHLHLHLHL} \\
 Test B & \textwave{LLHHHHHHHHHHLLLLLLLLLLLL} \\
 Test C & \textwave{LLLLLLLLLHHHHHLHLHLHLLHH} \\
 Test C & \textwave{LLLLLLLLzHHHHHLHLHLHLLHH} \\
 Test C & \textwave{LLLLLLLLLlhHHHHLHLHLHLLHH} \\
 Test C & \textwave{LHLZZLZHZZLH} \\
 Test C & \textwave{lhlzzlzhzzlh} \\
 Test C & \textwave{LH} \\
 Test C & \textwave{lh} \\
 Test C & \textwave{Lh} \\
 Test C & \textwave{lH} \\
 Test C & \textwave{LDDXDDLHDDDDHDHDLDLHHDHH} \\
 Test C & \textwave{lddxddlhddddhdhdldlhhdhh} \\
 Test C & \textwave{ZZDZDzdzdZdZDzDz} \\
\end{tabular}


\begin{tabular}{lcccccccccc}
 & H & h & L & l & Z & z & D & d & X & x\\
 & \textwave{H} & \textwave{h} & \textwave{L} & \textwave{l} & \textwave{Z} & \textwave{z} & \textwave{D} & \textwave{d} & \textwave{X} & \textwave{x}\\
H & \textwave{HH} & \textwave{Hh} & \textwave{HL} & \textwave{Hl} & \textwave{HZ} & \textwave{Hz} & \textwave{HD} & \textwave{Hd} & \textwave{HX} & \textwave{Hx}\\
h & \textwave{hH} & \textwave{hh} & \textwave{hL} & \textwave{hl} & \textwave{hZ} & \textwave{hz} & \textwave{hD} & \textwave{hd} & \textwave{hX} & \textwave{hx}\\
L & \textwave{LH} & \textwave{Lh} & \textwave{LL} & \textwave{Ll} & \textwave{LZ} & \textwave{Lz} & \textwave{LD} & \textwave{Ld} & \textwave{LX} & \textwave{Lx}\\
l & \textwave{lH} & \textwave{lh} & \textwave{lL} & \textwave{ll} & \textwave{lZ} & \textwave{lz} & \textwave{lD} & \textwave{ld} & \textwave{lX} & \textwave{lx}\\
Z & \textwave{ZH} & \textwave{Zh} & \textwave{ZL} & \textwave{Zl} & \textwave{ZZ} & \textwave{Zz} & \textwave{ZD} & \textwave{Zd} & \textwave{ZX} & \textwave{Zx}\\
z & \textwave{zH} & \textwave{zh} & \textwave{zL} & \textwave{zl} & \textwave{zZ} & \textwave{zz} & \textwave{zD} & \textwave{zd} & \textwave{zX} & \textwave{zx}\\
D & \textwave{DH} & \textwave{Dh} & \textwave{DL} & \textwave{Dl} & \textwave{DZ} & \textwave{Dz} & \textwave{DD} & \textwave{Dd} & \textwave{DX} & \textwave{Dx}\\
d & \textwave{dH} & \textwave{dh} & \textwave{dL} & \textwave{dl} & \textwave{dZ} & \textwave{dz} & \textwave{dD} & \textwave{dd} & \textwave{dX} & \textwave{dx}\\
X & \textwave{XH} & \textwave{Xh} & \textwave{XL} & \textwave{Xl} & \textwave{XZ} & \textwave{Xz} & \textwave{XD} & \textwave{Xd} & \textwave{XX} & \textwave{Xx}\\
x & \textwave{xH} & \textwave{xh} & \textwave{xL} & \textwave{xl} & \textwave{xZ} & \textwave{xz} & \textwave{xD} & \textwave{xd} & \textwave{xX} & \textwave{xx}\\
\end{tabular}

\end{document}


